Version 4
SHEET 1 5752 8804
WIRE -1168 4880 -1168 4864
WIRE -608 4880 -608 4864
WIRE -128 4880 -128 4864
WIRE 2208 5280 2208 5264
WIRE 1584 5296 1584 5280
WIRE 1248 5376 1168 5376
WIRE 1344 5376 1248 5376
WIRE 1168 5392 1168 5376
WIRE 4032 5408 4032 5392
WIRE 480 5520 480 5488
WIRE 2560 5584 2512 5584
WIRE 2624 5584 2560 5584
WIRE 2768 5584 2704 5584
WIRE 3008 5584 2768 5584
WIRE 3232 5584 3008 5584
WIRE 3360 5584 3232 5584
WIRE 3536 5584 3440 5584
WIRE 3840 5584 3536 5584
WIRE 3952 5584 3840 5584
WIRE -464 5632 -800 5632
WIRE -256 5632 -464 5632
WIRE -96 5632 -176 5632
WIRE 48 5632 -32 5632
WIRE 480 5632 480 5584
WIRE 480 5632 48 5632
WIRE 672 5632 480 5632
WIRE 1024 5632 672 5632
WIRE 1216 5632 1024 5632
WIRE 1440 5632 1280 5632
WIRE 1776 5632 1648 5632
WIRE 1888 5632 1776 5632
WIRE 2064 5632 1952 5632
WIRE 2352 5632 2272 5632
WIRE 2512 5632 2512 5584
WIRE 2512 5632 2352 5632
WIRE 3536 5632 3536 5584
WIRE -800 5648 -800 5632
WIRE 2768 5664 2768 5648
WIRE 2768 5664 2736 5664
WIRE 3056 5664 3008 5664
WIRE 1216 5696 1168 5696
WIRE 1440 5696 1280 5696
WIRE 1776 5696 1648 5696
WIRE 1888 5696 1776 5696
WIRE 2064 5696 1952 5696
WIRE 2352 5696 2272 5696
WIRE 2512 5696 2352 5696
WIRE -464 5728 -800 5728
WIRE -256 5728 -464 5728
WIRE -96 5728 -176 5728
WIRE 48 5728 -32 5728
WIRE 480 5728 48 5728
WIRE 672 5728 480 5728
WIRE 1024 5728 672 5728
WIRE 1168 5728 1168 5696
WIRE 1168 5728 1024 5728
WIRE 2512 5744 2512 5696
WIRE 2624 5744 2512 5744
WIRE 2768 5744 2768 5728
WIRE 2768 5744 2704 5744
WIRE 3008 5744 2768 5744
WIRE 3248 5744 3008 5744
WIRE 3360 5744 3248 5744
WIRE 3536 5744 3536 5696
WIRE 3536 5744 3440 5744
WIRE 3840 5744 3536 5744
WIRE 3952 5744 3840 5744
WIRE 480 5760 480 5728
WIRE 1472 5872 1472 5824
WIRE 1536 5872 1536 5824
WIRE 1536 5872 1472 5872
WIRE 1616 5872 1616 5824
WIRE 2096 5872 2096 5824
WIRE 2160 5872 2160 5824
WIRE 2160 5872 2096 5872
WIRE 2240 5872 2240 5824
WIRE 1472 5920 1472 5872
WIRE 2096 5920 2096 5872
WIRE 2560 6032 2560 5584
WIRE 2784 6032 2560 6032
WIRE 2928 6032 2864 6032
WIRE 3232 6032 2928 6032
WIRE 3568 6032 3232 6032
WIRE 3696 6032 3648 6032
WIRE 3744 6032 3696 6032
WIRE 3840 6032 3744 6032
WIRE 3952 6032 3840 6032
WIRE 3744 6080 3744 6032
WIRE 4032 6080 4032 6064
WIRE 2928 6112 2928 6096
WIRE 2928 6112 2896 6112
WIRE 2080 6128 1888 6128
WIRE 1888 6144 1888 6128
WIRE 2080 6144 2080 6128
WIRE 2512 6192 2512 5744
WIRE 2784 6192 2512 6192
WIRE 2928 6192 2928 6176
WIRE 2928 6192 2864 6192
WIRE 3232 6192 2928 6192
WIRE 3568 6192 3232 6192
WIRE 3696 6192 3648 6192
WIRE 3744 6192 3744 6144
WIRE 3744 6192 3696 6192
WIRE 3856 6192 3744 6192
WIRE 3952 6192 3856 6192
WIRE 2080 6240 2080 6224
WIRE 2160 6240 2080 6240
WIRE 2192 6240 2160 6240
WIRE 2080 6272 2080 6240
WIRE 1888 6432 1888 6224
WIRE 2080 6432 2080 6352
WIRE 3184 6448 3184 6432
FLAG -1168 4960 0
FLAG -1168 4864 Sig_IN
FLAG -464 5632 IN_p
FLAG -464 5728 IN_n
FLAG 1472 5920 3.3V
FLAG 1776 5632 OUT_POS
FLAG 1776 5696 OUT_NEG
FLAG 2096 5920 3.3V
FLAG 2352 5632 OUT_POS2
FLAG 2352 5696 OUT_NEG2
FLAG 48 5632 IN_p3
FLAG 48 5728 IN_n3
FLAG 1616 5872 0
FLAG 2240 5872 0
FLAG 1888 6128 3.3V
FLAG 2080 6432 0
FLAG 2160 6240 Vref
FLAG 2208 5360 0
FLAG 2208 5264 LNA_PGA_OUT2
FLAG 1584 5376 0
FLAG 1584 5280 LNA_PGA_OUT1
FLAG 1888 6432 0
FLAG -128 4960 0
FLAG -128 4864 Sig_IN3
FLAG -608 4960 0
FLAG -608 4864 Sig_IN2
FLAG 672 5632 IN_p2
FLAG 672 5728 IN_n2
FLAG 480 5824 0
FLAG 480 5488 0
FLAG 1168 5472 0
FLAG 1248 5376 Out_BP2_Diff_Value
FLAG 2736 5664 0
FLAG 3232 5584 FPGA_Pin_p
FLAG 3248 5744 FPGA_Pin_n
FLAG 4032 5488 0
FLAG 4032 5392 FPGA_ADC_Diff_Internal
FLAG 3696 6032 Ch_p
FLAG 3696 6192 Ch_n
FLAG 2896 6112 0
FLAG 3232 6032 MCU_ADC_Pin_p
FLAG 3232 6192 MCU_ADC_Pin_n
FLAG 4032 6160 0
FLAG 4032 6064 MCU_ADC_Diff_Internal
FLAG 3840 6032 MCU_ADC_INT_p
FLAG 3856 6192 MCU_ADC_INT_n
FLAG 3840 5584 FPGA_ADC_INT_p
FLAG 3840 5744 FPGA_ADC_INT_n
FLAG 3056 5664 0
FLAG 1024 5632 BP2_OUT-
FLAG 1024 5728 BP2_OUT+
FLAG 3184 6528 0
FLAG 3184 6432 MCU_AIN_PIN
SYMBOL res -160 5616 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value {mc(10k, tol_R)}
SYMBOL res -160 5712 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value {mc(10k, tol_R)}
SYMBOL bv -1168 4864 R0
SYMATTR InstName B3
SYMATTR Value V=V(IN_p,IN_n)
SYMBOL AutoGenerated\\ADA8282 1536 5664 R0
SYMATTR InstName U2
SYMBOL AutoGenerated\\ADA8282 2160 5664 R0
SYMATTR InstName U3
SYMBOL cap 1280 5616 R90
WINDOW 0 18 7 VBottom 2
WINDOW 3 -34 -54 VTop 2
SYMATTR InstName C3
SYMATTR Value {mc(0.1u, tol_C*1)}
SYMBOL cap 1280 5680 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 25 -43 VTop 2
SYMATTR InstName C4
SYMATTR Value {mc(0.1u, tol_C*1)}
SYMBOL cap 1952 5616 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -90 9 VTop 2
SYMATTR InstName C2
SYMATTR Value {mc(0.1u, tol_C*10)}
SYMBOL cap 1952 5680 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 89 49 VTop 2
SYMATTR InstName C8
SYMATTR Value {mc(0.1u, tol_C*10)}
SYMBOL voltage 1888 6128 R0
WINDOW 123 0 0 Left 2
SYMATTR InstName Vcc4
SYMATTR Value 3.3
SYMBOL res 2064 6128 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 2064 6256 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL bv 2208 5264 R0
SYMATTR InstName B4
SYMATTR Value V=V(OUT_POS2,OUT_NEG2)
SYMBOL bv 1584 5280 R0
SYMATTR InstName B5
SYMATTR Value V=V(OUT_POS,OUT_NEG)
SYMBOL bv -128 4864 R0
SYMATTR InstName B6
SYMATTR Value V=V(IN_p3,IN_n3)
SYMBOL bv -608 4864 R0
SYMATTR InstName B7
SYMATTR Value V=V(IN_p2,IN_n2)
SYMBOL voltage -800 5632 R0
WINDOW 123 47 46 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -84 183 Left 2
WINDOW 0 47 13 Left 2
SYMATTR Value2 AC 10u
SYMATTR Value SINE(0 1000 120k)
SYMATTR InstName V1
SYMBOL cap 464 5760 R0
SYMATTR InstName C12
SYMATTR Value {mc(12p, tol_C*10)}
SYMBOL cap 464 5520 R0
SYMATTR InstName C14
SYMATTR Value {mc(12p, tol_C*10)}
SYMBOL bv 1168 5376 R0
WINDOW 3 -127 140 Left 2
SYMATTR Value V=V(BP2_OUT-,BP2_OUT+)
SYMATTR InstName B9
SYMBOL res 2720 5568 R90
WINDOW 0 -26 54 VBottom 2
WINDOW 3 -28 55 VTop 2
SYMATTR InstName RG11
SYMATTR Value {mc(1k, tol_R)}
SYMBOL res 2720 5728 R90
WINDOW 0 -26 54 VBottom 2
WINDOW 3 -28 55 VTop 2
SYMATTR InstName RG12
SYMATTR Value {mc(1k, tol_R)}
SYMBOL cap 2752 5584 R0
WINDOW 3 25 -27 Left 2
SYMATTR Value {mc(1000p, tol_C)}
SYMATTR InstName C21
SYMBOL cap 2752 5664 R0
WINDOW 3 -14 89 Left 2
SYMATTR Value {mc(1000p, tol_C)}
SYMATTR InstName C22
SYMBOL res 3664 6016 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1.2k
SYMBOL res 3664 6176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1.2k
SYMBOL bv 4032 5392 R0
SYMATTR InstName B10
SYMATTR Value V=V(FPGA_ADC_INT_p,FPGA_ADC_INT_n)
SYMBOL cap 3728 6080 R0
WINDOW 3 39 34 Left 2
WINDOW 0 39 11 Left 2
SYMATTR Value 8pF
SYMATTR InstName Ch2
SYMBOL res 2880 6016 R90
WINDOW 0 -26 54 VBottom 2
WINDOW 3 -28 55 VTop 2
SYMATTR InstName RG13
SYMATTR Value {mc(330, tol_R)}
SYMBOL res 2880 6176 R90
WINDOW 0 -26 54 VBottom 2
WINDOW 3 -28 55 VTop 2
SYMATTR InstName RG14
SYMATTR Value {mc(330, tol_R)}
SYMBOL cap 2912 6032 R0
SYMATTR InstName C23
SYMATTR Value {mc(1n, tol_C)}
SYMBOL cap 2912 6112 R0
WINDOW 3 -14 89 Left 2
SYMATTR Value {mc(1n, tol_C)}
SYMATTR InstName C24
SYMBOL res 3456 5568 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 3456 5728 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL cap 3520 5632 R0
WINDOW 3 39 34 Left 2
WINDOW 0 39 11 Left 2
SYMATTR Value 3pF
SYMATTR InstName Ch3
SYMBOL bv 4032 6064 R0
SYMATTR InstName B11
SYMATTR Value V=V(MCU_ADC_INT_p,MCU_ADC_INT_n)
SYMBOL res 3024 5680 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RG7
SYMATTR Value {mc(590, tol_R)}
SYMBOL res 3024 5760 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RG8
SYMATTR Value {mc(590, tol_R)}
SYMBOL cap -32 5616 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -56 -47 VTop 2
SYMATTR InstName C1
SYMATTR Value {mc(0.1u, tol_C)}
SYMBOL cap -32 5712 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 -54 VTop 2
SYMATTR InstName C10
SYMATTR Value {mc(0.1u, tol_C)}
SYMBOL bv 3184 6432 R0
SYMATTR InstName B1
SYMATTR Value V=V(MCU_ADC_Pin_p,MCU_ADC_Pin_n)
TEXT -1168 4456 Left 2 !;tran 1m
TEXT -1160 4408 Left 2 !;ac dec 100 1k 750k
TEXT -2456 4672 Left 2 !.PARAM k12_2   0.000001
TEXT -2456 4712 Left 2 !.PARAM M12_2 {{k12_2}*(sqrt({L1s_2}*{L2s_2})*({N1_2}/{N2_2}))}
TEXT -2456 4744 Left 2 !.PARAM M21_2 {{k12_2}*(sqrt({L1s_2}*{L2s_2})*({N2_2}/{N1_2}))}
TEXT -2456 4624 Left 2 !.PARAM L1s_2 36u
TEXT -2456 4648 Left 2 !.PARAM L2s_2 1.7u
TEXT -2456 4568 Left 2 !.PARAM N1_2 1
TEXT -2456 4592 Left 2 !.PARAM N2_2 1
TEXT -2456 4784 Left 2 !.PARAM L1l_2 {{L1s_2}-{M12_2}}
TEXT -2456 4816 Left 2 !.PARAM L2l_2 {{L2s_2}-{M21_2}}
TEXT -1168 4512 Left 2 !.param C_HP1 {270p}
TEXT -1168 4552 Left 2 !.param C_LP1 {10p}
TEXT -2088 4632 Left 2 ;.step param k12_2  0.000001 0.004 0.0005
TEXT -2088 4664 Left 2 ;.step param k12_2 0.000002 0.05 0.049998
TEXT -752 4408 Left 2 !.param tol_C=0.01 ;   +/-1% capacitor component tolerance
TEXT -752 4448 Left 2 !.param tol_R=0.001 ;   +/-0.1% resistor component tolerance
TEXT -3168 5960 Left 2 !.PARAM I_AMP_120kHz_week 260m
TEXT -3168 5928 Left 2 !.PARAM I_AMP_85kHz_week {I_AMP_120kHz_week*40}
TEXT -744 4488 Left 2 !.step param X 0 10 1 ; a dummy parameter to cycle Monte Carlo runs
TEXT 3096 5440 Left 6 ;FPGA_INTERFACE
TEXT 3192 5920 Left 6 ;MCU_INTERFACE
TEXT -488 5256 Left 2 !.noise V(LNA_PGA_OUT2) V1 dec 100 1k 1Meg
TEXT 672 5256 Left 2 !.param R_FEEDBACK_2 56k*ScaleFactor
TEXT 200 5224 Left 2 !.param RIN_1 27k*ScaleFactor
TEXT 672 5224 Left 2 !.param RIN_2 18k*ScaleFactor
TEXT 200 5192 Left 2 !.param C1 100p/ScaleFactor
TEXT 664 5192 Left 2 !.param C2 100p/ScaleFactor
TEXT 200 5256 Left 2 !.param R_FEEDBACK_1 82k*ScaleFactor
TEXT 672 5288 Left 2 !.param R_GAIN_2 3.9k*ScaleFactor
TEXT 200 5288 Left 2 !.param R_GAIN_1 5.6k*ScaleFactor
TEXT 416 5144 Left 2 !.param ScaleFactor 0.1
TEXT -488 5216 Left 2 ;.noise V(Out_BP1_Diff_Value) V1 dec 100 1k 1Meg
TEXT -488 5176 Left 2 ;.ac dec 100 1k 750k
